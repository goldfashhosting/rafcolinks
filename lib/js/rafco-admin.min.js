function rafcoMessage(s,r){jQuery("div#wpbody h2:first").after('<div id="message" class="'+s+' below-h2"><p>'+r+"</p></div>")}function rafcoClearAdmin(){jQuery("div#wpbody div#message").remove(),jQuery("div#wpbody div#setting-error-settings_updated").remove()}function rafcoBtnDisable(s,r,e){jQuery(s).find(r).css("visibility","visible"),jQuery(s).find(e).attr("disabled","disabled")}function rafcoBtnEnable(s,r,e){jQuery(s).find(r).css("visibility","hidden"),jQuery(s).find(e).removeAttr("disabled")}jQuery(document).ready(function(s){s.fn.divExists=function(s){var r=[].slice.call(arguments,1);return this.length&&s.call(this,r),this};var r="",e="",i="",t="",o="",a="",n="";s("div.rafco-sidebox").on("click","a.admin-twitter-link",function(){return s(window).width()>765?(r=s(this).attr("href"),window.open(r,"social-share-dialog","width=626,height=436"),!1):void 0}),s("td.apikey-field-wrapper").divExists(function(){s("input#rafco-api").hidePassword(!1),s("td.apikey-field-wrapper").on("click","span.password-toggle",function(){s(this).hasClass("password-visible")?(s(this).removeClass("password-visible"),s("input#rafco-api").hidePassword(!1)):(s(this).addClass("password-visible"),s("input#rafco-api").showPassword(!1))})}),s("div.rafco-sidebox").find("a.external").attr("target","_blank"),s("tr.setting-item-types").divExists(function(){e=s(this).find("input#rafco-cpt").is(":checked"),e===!0&&s("tr.secondary").show(),e===!1&&(s("tr.secondary").hide(),s("tr.secondary").find("input:checkbox").prop("checked",!1)),s("tr.setting-item-types").on("change","input#rafco-cpt",function(){e=s(this).is(":checked"),e===!0&&s("tr.secondary").fadeIn(700),e===!1&&(s("tr.secondary").fadeOut(700),s("tr.secondary").find("input:checkbox").prop("checked",!1))})}),s("div#rafco-post-display").on("click","input.rafco-api",function(){if(a=s(this).data("post-id"),n=s(this).data("nonce"),""!==a&&""!==n){s("div#wpbody div#message").remove(),s("div#wpbody div#setting-error-settings_updated").remove(),s("div#rafco-post-display").find("span.rafco-spinner").css("visibility","visible"),s("div#rafco-post-display").find("input.rafco-api").attr("disabled","disabled"),o=s("div#rafco-post-display").find("input.rafco-keyw").val();var r={action:"create_rafco",keyword:o,post_id:a,nonce:n};jQuery.post(ajaxurl,r,function(r){s("div#rafco-post-display").find("span.rafco-spinner").css("visibility","hidden"),s("div#rafco-post-display").find("input.rafco-api").removeAttr("disabled");var e;try{e=jQuery.parseJSON(r)}catch(i){rafcoMessage("error",rafcoAdmin.defaultError)}e.success===!0?rafcoMessage("updated",e.message):e.success===!1&&null!==e.message?rafcoMessage("error",e.message):rafcoMessage("error",rafcoAdmin.defaultError),e.success===!0&&null!==e.linkbox&&(s("div#rafco-post-display").find("p.rafco-submit-block").remove(),s("div#rafco-post-display").find("p.rafco-input-block").replaceWith(e.linkbox),s("div#edit-slug-box").append('<input type="hidden" value="'+e.linkurl+'" id="shortlink">'),s("div#edit-slug-box").append(rafcoAdmin.shortSubmit))})}}),s("div#rafco-post-display").on("click","span.rafco-delete",function(){if(a=s(this).data("post-id"),n=s(this).data("nonce"),""!==a&&""!==n){s("div#wpbody div#message").remove(),s("div#wpbody div#setting-error-settings_updated").remove();var r={action:"delete_rafco",post_id:a,nonce:n};jQuery.post(ajaxurl,r,function(r){var e;try{e=jQuery.parseJSON(r)}catch(i){rafcoMessage("error",rafcoAdmin.defaultError)}e.success===!0?rafcoMessage("updated",e.message):e.success===!1&&null!==e.message?rafcoMessage("error",e.message):rafcoMessage("error",rafcoAdmin.defaultError),e.success===!0&&null!==e.rafcobox&&(s("div#rafco-post-display").find("p.howto").remove(),s("div#rafco-post-display").find("p.rafco-exist-block").replaceWith(e.linkbox),s("div#edit-slug-box").find("input#shortlink").remove(),s("div#edit-slug-box").find('a:contains("Get Shortlink")').remove())})}}),s("div.row-actions").on("click","a.rafco-admin-update",function(r){if(r.preventDefault(),n=s(this).data("nonce"),""!==n&&(a=s(this).data("post-id"),""!==a)){t=s(this).parents("div.row-actions"),i=s(this).parents("tr.entry").find("td.rafco-click");var e={action:"stats_rafco",post_id:a,nonce:n};jQuery.post(ajaxurl,e,function(s){t.removeClass("visible");var r;try{r=jQuery.parseJSON(s)}catch(e){return!1}r.success===!0&&null!==r.clicknm&&i.find("span").text(r.clicknm)})}}),s("div.row-actions").on("click","a.rafco-admin-create",function(r){if(r.preventDefault(),n=s(this).data("nonce"),""!==n&&(a=s(this).data("post-id"),""!==a)){t=s(this).parents("div.row-actions"),i=s(this).parents("div.row-actions").find("span.create-rafco");var e={action:"inline_rafco",post_id:a,nonce:n};jQuery.post(ajaxurl,e,function(s){t.removeClass("visible");var r;try{r=jQuery.parseJSON(s)}catch(e){return!1}r.success===!0&&null!==r.rowactn&&i.replaceWith(r.rowactn)})}}),s("div#rafco-admin-status").on("click","input.rafco-click-status",function(){if(n=s("input#rafco_status").val(),""!==n){rafcoClearAdmin(),rafcoBtnDisable("div#rafco-admin-status","span.rafco-status-spinner","input.rafco-click-status");var r={action:"status_rafco",nonce:n};jQuery.post(ajaxurl,r,function(r){rafcoBtnEnable("div#rafco-admin-status","span.rafco-status-spinner","input.rafco-click-status");var e;try{e=jQuery.parseJSON(r)}catch(i){rafcoMessage("error",rafcoAdmin.defaultError)}e.success===!0?(""!==e.baricon&&s("div#rafco-admin-status").find("span.api-status-icon").replaceWith(e.baricon),""!==e.message&&s("div#rafco-admin-status").find("p.api-status-text").text(e.message),""!==e.stcheck&&(s("div#rafco-admin-status").find("p.api-status-actions").append(e.stcheck),s("span.api-status-checkmark").delay(3e3).fadeOut(1e3))):e.success===!1&&null!==e.message?rafcoMessage("error",e.message):rafcoMessage("error",rafcoAdmin.defaultError)})}}),s("div#rafco-data-refresh").on("click","input.rafco-click-updates",function(){if(n=s("input#rafco_refresh").val(),""!==n){rafcoClearAdmin(),rafcoBtnDisable("div#rafco-data-refresh","span.rafco-refresh-spinner","input.rafco-click-updates");var r={action:"refresh_rafco",nonce:n};jQuery.post(ajaxurl,r,function(s){rafcoBtnEnable("div#rafco-data-refresh","span.rafco-refresh-spinner","input.rafco-click-updates");var r;try{r=jQuery.parseJSON(s)}catch(e){rafcoMessage("error",rafcoAdmin.defaultError)}r.success===!0&&""!==r.message?rafcoMessage("updated",r.message):r.success===!1&&null!==r.message?rafcoMessage("error",r.message):rafcoMessage("error",rafcoAdmin.defaultError)})}}),s("div#rafco-data-refresh").on("click","input.rafco-click-import",function(){if(n=s("input#rafco_import").val(),""!==n){rafcoClearAdmin(),rafcoBtnDisable("div#rafco-data-refresh","span.rafco-import-spinner","input.rafco-click-import");var r={action:"import_rafco",nonce:n};jQuery.post(ajaxurl,r,function(s){rafcoBtnEnable("div#rafco-data-refresh","span.rafco-import-spinner","input.rafco-click-import");var r;try{r=jQuery.parseJSON(s)}catch(e){rafcoMessage("error",rafcoAdmin.defaultError)}r.success===!0&&""!==r.message?rafcoMessage("updated",r.message):r.success===!1&&null!==r.message?rafcoMessage("error",r.message):rafcoMessage("error",rafcoAdmin.defaultError)})}}),s("div#rafco-data-refresh").on("click","input.rafco-convert",function(){if(n=s("input#rafco_convert").val(),""!==n){rafcoClearAdmin(),rafcoBtnDisable("div#rafco-data-refresh","span.rafco-convert-spinner","input.rafco-convert");var r={action:"convert_rafco",nonce:n};jQuery.post(ajaxurl,r,function(s){rafcoBtnEnable("div#rafco-data-refresh","span.rafco-convert-spinner","input.rafco-convert");var r;try{r=jQuery.parseJSON(s)}catch(e){rafcoMessage("error",rafcoAdmin.defaultError)}r.success===!0&&""!==r.message?rafcoMessage("updated",r.message):r.success===!1&&null!==r.message?rafcoMessage("error",r.message):rafcoMessage("error",rafcoAdmin.defaultError)})}})});
